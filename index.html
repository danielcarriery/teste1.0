<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Questionário sobre Procrastinação</title>
  <style>
    :root{--bg:#f7f8fb;--card:#ffffff;--accent:#4b6cff;--muted:#6b7280}
    body{font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:var(--bg); margin:0; padding:24px; color:#111}
    .container{max-width:900px;margin:0 auto}
    header{display:flex;align-items:center;gap:16px;margin-bottom:18px}
    header h1{font-size:20px;margin:0}
    .card{background:var(--card);border-radius:12px;padding:20px;box-shadow:0 6px 18px rgba(16,24,40,0.06)}
    .q{margin-bottom:14px}
    .q p{margin:0 0 8px 0;font-weight:600}
    .options{display:flex;gap:8px}
    label.option{flex:1;background:#f3f4f6;padding:8px;border-radius:8px;text-align:center;cursor:pointer}
    input[type=radio]{display:none}
    input[type=radio]:checked + .option{background:linear-gradient(180deg,var(--accent),#2c46d9);color:white}
    .actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
    button{background:var(--accent);color:white;border:none;padding:10px 14px;border-radius:8px;cursor:pointer}
    .pay-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.4);display:flex;align-items:center;justify-content:center}
    .pay-box{background:white;padding:20px;border-radius:12px;max-width:420px;width:100%}
    .muted{color:var(--muted);font-size:14px}
    footer{margin-top:14px;font-size:13px;color:var(--muted)}
    .result{white-space:pre-wrap}
    .hidden{display:none}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Questionário sobre Procrastinação</h1>
      <div class="muted">15 perguntas • Resultado e plano prático liberados após pagamento (R$6,00)</div>
    </header>

    <main class="card">
      <form id="quiz">
        <div id="questions"></div>

        <div class="actions">
          <button type="submit">Enviar respostas</button>
        </div>
      </form>

      <div id="payPrompt" class="hidden">
        <p class="muted">Para ver o resultado completo e o plano de ação personalizado, é necessário pagar R$6,00.</p>
        <div style="display:flex;gap:8px; margin-top:10px;">
          <button id="payButton">Pagar R$6,00</button>
          <button id="simulate" type="button" style="background:#10b981">Simular pagamento (teste)</button>
        </div>
      </div>

      <div id="resultBox" class="hidden card" style="margin-top:12px">
        <h3>Seu resultado</h3>
        <div id="resultText" class="result"></div>
      </div>

      <footer>
        <div class="muted">Observação: o botão de pagamento aqui é demonstrativo. Para integrar pagamentos reais (MercadoPago, PayPal, Stripe, etc.), substitua a função simulatePayment() pelo fluxo da sua plataforma e verifique requisitos legais locais.</div>
      </footer>
    </main>
  </div>

  <script>
    // --- Perguntas (15) - escala 1 (Nunca) a 5 (Sempre) ---
    const questions = [
      'Eu frequentemente adio tarefas importantes mesmo sabendo das consequências.',
      'Tenho dificuldade em começar tarefas mesmo quando sei exatamente o que fazer.',
      'Distraio-me facilmente com redes sociais, mensagens ou vídeos.',
      'Costumo subestimar o tempo necessário para concluir uma atividade.',
      'Prefiro fazer tarefas mais agradáveis e deixar as difíceis para depois.',
      'Sinto ansiedade antes de começar tarefas importantes.',
      'Posso passar horas planejando sem realmente executar.',
      'Adio decisões até que outras pessoas tomem por mim.',
      'Perco prazos por começar tarefas em cima da hora.',
      'Tenho dificuldade em manter disciplina com rotinas diárias.',
      'Sinto remorso ou culpa após adiar algo importante.',
      'Deixo tarefas que exigem criatividade para ' + 'quando estiver ' + 'com mais "inspiração".',
      'Procrastino mesmo em tarefas que me trazem benefícios claros.',
      'Adiar tarefas impacta meu sono ou bem-estar.',
      'Já deixei oportunidades importantes passarem por adiar demais.'
    ];

    const questionsDiv = document.getElementById('questions');

    questions.forEach((q, i) => {
      const idx = i+1;
      const wrapper = document.createElement('div');
      wrapper.className = 'q';
      wrapper.innerHTML = `
        <p>${idx}. ${q}</p>
        <div class="options">
          <label><input type="radio" name="q${idx}" value="1" required><span class="option">1<br><small class="muted">Nunca</small></span></label>
          <label><input type="radio" name="q${idx}" value="2"><span class="option">2<br><small class="muted">Raramente</small></span></label>
          <label><input type="radio" name="q${idx}" value="3"><span class="option">3<br><small class="muted">Às vezes</small></span></label>
          <label><input type="radio" name="q${idx}" value="4"><span class="option">4<br><small class="muted">Frequentemente</small></span></label>
          <label><input type="radio" name="q${idx}" value="5"><span class="option">5<br><small class="muted">Sempre</small></span></label>
        </div>
      `;
      questionsDiv.appendChild(wrapper);
    });

    const quiz = document.getElementById('quiz');
    const payPrompt = document.getElementById('payPrompt');
    const payButton = document.getElementById('payButton');
    const simulate = document.getElementById('simulate');
    const resultBox = document.getElementById('resultBox');
    const resultText = document.getElementById('resultText');

    // Calcula pontuação
    function calcScore(formData){
      let sum = 0;
      for(let i=1;i<=questions.length;i++){
        const v = parseInt(formData.get('q'+i),10) || 0;
        sum += v;
      }
      return sum;
    }

    // Gera texto de resultado e plano (detalhado) - guardado mas só mostra após pagamento
    function generateReport(score){
      const max = questions.length * 5;
      let level;
      if(score <= Math.round(max*0.35)) level = 'Baixa tendência à procrastinação';
      else if(score <= Math.round(max*0.7)) level = 'Procrastinação moderada';
      else level = 'Procrastinação alta';

      // Recomendações práticas resumidas (pode ser ampliado)
      const recommendations = {
        'Baixa tendência à procrastinação': `Parabéns — você demonstra boa capacidade de iniciar e concluir tarefas. Manter rotinas, definir micro-objetivos (25–50 minutos) e revisar prioridades semanalmente ajuda a manter esse padrão.`,
        'Procrastinação moderada': `Você adia tarefas de vez em quando. Experimente: 1) Técnica Pomodoro (25/5), 2) dividir tarefas em passos de 15–30 minutos, 3) eliminar distrações por períodos bloqueados, 4) usar recompensas pequenas ao concluir blocos.`,
        'Procrastinação alta': `A procrastinação está afetando sua produtividade. Recomendações: 1) comece com tarefas de 10 minutos (efeito "inércia"), 2) peça responsabilização (parceiro/mentor), 3) use agendas visuais e bloqueadores de sites, 4) avalie aspectos emocionais (ansiedade/perfeccionismo) e, se necessário, procure apoio profissional.`
      };

      return `Pontuação: ${score} / ${max}\nNível: ${level}\n\nPlano prático:\n${recommendations[level]}`;
    }

    let pendingReport = null; // guarda o relatório até o pagamento

    quiz.addEventListener('submit', (e)=>{
      e.preventDefault();
      const fd = new FormData(quiz);
      const score = calcScore(fd);
      pendingReport = generateReport(score);
      // mostra prompt de pagamento
      payPrompt.classList.remove('hidden');
      window.scrollTo({top:document.body.scrollHeight,behavior:'smooth'});
    });

    // Simula pagamento (apenas para testes). Substitua por integração real de pagamentos.
    function simulatePayment(){
      // aqui você poderia exibir um modal de sucesso vindo do gateway
      alert('Pagamento simulado com sucesso — desbloqueando resultado (modo teste).');
      revealResult();
    }

    function revealResult(){
      if(!pendingReport){
        alert('Nenhum resultado gerado. Por favor, responda ao questionário primeiro.');
        return;
      }
      resultText.textContent = pendingReport;
      resultBox.classList.remove('hidden');
      payPrompt.classList.add('hidden');
    }

    // Botões
    simulate.addEventListener('click', simulatePayment);

    payButton.addEventListener('click', ()=>{
      // --- IMPLEMENTAÇÃO REAL DE PAGAMENTO ---
      // Substitua esse trecho pelo redirecionamento para seu gateway (ex: MercadoPago/Stripe/PayPal).
      // 1) Criar preferência/checkout no backend (quantia R$6,00) e retornar link seguro.
      // 2) Redirecionar o usuário para o link. Ao confirmar o pagamento, seu webhook/backend deve
      //    comunicar o front-end (ou marcar a sessão) para liberar o resultado.
      // Como exemplo temporário, usamos a simulação abaixo:
      simulatePayment();
    });

  </script>
</body>
</html>
